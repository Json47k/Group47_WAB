<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cookie Test</title>
    <link rel="stylesheet" type="text/css" href="css/cookies.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-button {
            background: #717fe0;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 10px 5px;
        }
        .test-button:hover {
            background: #5d6bc0;
        }
        .status {
            background: #f0f0f0;
            padding: 15px;
            border-radius: 4px;
            margin: 20px 0;
        }
        .debug-info {
            background: #e8f4f8;
            padding: 15px;
            border-radius: 4px;
            margin: 20px 0;
            font-family: monospace;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>Cookie Banner Test</h1>
        
        <div class="status" id="status">
            <strong>Current Status:</strong> <span id="cookieStatus">Checking...</span>
        </div>
        
        <div class="debug-info" id="debugInfo">
            <strong>Debug Info:</strong><br>
            <span id="debugContent">Loading...</span>
        </div>
        
        <div>
            <button class="test-button" onclick="clearCookieConsent()">Clear Cookie Consent</button>
            <button class="test-button" onclick="showCookieBanner()">Show Banner</button>
            <button class="test-button" onclick="hideCookieBanner()">Hide Banner</button>
            <button class="test-button" onclick="checkStatus()">Check Status</button>
            <button class="test-button" onclick="testCookies()">Test Cookies</button>
            <button class="test-button" onclick="location.reload()">Reload Page</button>
        </div>
        
        <div style="margin-top: 30px;">
            <h3>Instructions:</h3>
            <ol>
                <li>When you first load this page, the cookie banner should appear at the bottom</li>
                <li>Click "Accept All" to accept cookies - the banner should disappear</li>
                <li>Reload the page - the banner should NOT appear again</li>
                <li>Click "Clear Cookie Consent" and reload - the banner should appear again</li>
                <li>Use the debug buttons to test manually</li>
            </ol>
        </div>
    </div>

    <!-- Cookie Banner -->
    <div id="cookieBanner" class="cookie-banner" role="dialog" aria-live="polite" aria-label="Cookie Consent">
        <div class="cookie-container">
            <div class="cookie-text">
                <h3>We Value Your Privacy</h3>
                <p>We use cookies to enhance your browsing experience, serve personalized ads or content, and analyze our traffic. By clicking "Accept All", you consent to our use of cookies. You can manage your preferences in Cookie Settings.</p>
                <p>For more information, please read our <a href="#" id="cookiePolicyLink">Cookie Policy</a> and <a href="#">Privacy Policy</a>.</p>
            </div>
            <div class="cookie-actions">
                <button class="cookie-btn cookie-settings" id="cookieSettings">Cookie Settings</button>
                <button class="cookie-btn cookie-decline" id="cookieDecline">Decline</button>
                <button class="cookie-btn cookie-accept" id="cookieAccept">Accept All</button>
            </div>
        </div>
    </div>

    <!-- Cookie Settings Modal -->
    <div id="cookieModal" class="cookie-modal">
        <div class="cookie-modal-content">
            <h2>Cookie Settings</h2>
            <p>You can set your preferences for various cookies used on our website.</p>
            
            <div class="cookie-option necessary">
                <h3>
                    Necessary Cookies
                    <label class="switch">
                        <input type="checkbox" checked disabled>
                        <span class="slider"></span>
                    </label>
                </h3>
                <p>These cookies are essential for the website to function properly. They cannot be disabled as they enable core functionality.</p>
            </div>
            
            <div class="cookie-option">
                <h3>
                    Analytics Cookies
                    <label class="switch">
                        <input type="checkbox" id="analyticsCookies" checked>
                        <span class="slider"></span>
                    </label>
                </h3>
                <p>These cookies help us understand how visitors interact with our website. The data collected is used to improve the user experience.</p>
            </div>
            
            <div class="cookie-option">
                <h3>
                    Marketing Cookies
                    <label class="switch">
                        <input type="checkbox" id="marketingCookies">
                        <span class="slider"></span>
                    </label>
                </h3>
                <p>These cookies are used to track visitors across websites. The intention is to display ads that are relevant and engaging.</p>
            </div>
            
            <div class="cookie-option">
                <h3>
                    Preferences Cookies
                    <label class="switch">
                        <input type="checkbox" id="preferenceCookies" checked>
                        <span class="slider"></span>
                    </label>
                </h3>
                <p>These cookies allow the website to remember choices you make and provide enhanced, more personal features.</p>
            </div>
            
            <div class="cookie-modal-buttons">
                <button class="cookie-modal-btn cookie-cancel" id="modalCancel">Cancel</button>
                <button class="cookie-modal-btn cookie-save" id="modalSave">Save Preferences</button>
            </div>
        </div>
    </div>

    <script src="js/cookies.js"></script>
    <script>
        function checkStatus() {
            const consent = getCookie("cookieConsent");
            const localConsent = localStorage.getItem("cookieConsent");
            const status = document.getElementById("cookieStatus");
            const banner = document.getElementById("cookieBanner");
            const debugContent = document.getElementById("debugContent");
            
            let finalConsent = consent || localConsent || "";
            
            if (finalConsent === "") {
                status.textContent = "No consent given - banner should be visible";
                status.style.color = "orange";
            } else if (finalConsent === "accepted") {
                status.textContent = "Cookies accepted - banner should be hidden";
                status.style.color = "green";
            } else if (finalConsent === "rejected") {
                status.textContent = "Cookies rejected - banner should be hidden";
                status.style.color = "red";
            } else {
                status.textContent = "Custom preferences set - banner should be hidden";
                status.style.color = "blue";
            }
            
            // Update debug info
            debugContent.innerHTML = `
                Cookie Consent: "${consent}"<br>
                localStorage Consent: "${localConsent}"<br>
                Final Consent: "${finalConsent}"<br>
                Banner Display: "${banner ? banner.style.display : 'NOT FOUND'}"<br>
                All Cookies: "${document.cookie}"<br>
                Banner Element: ${banner ? 'FOUND' : 'NOT FOUND'}<br>
                DOM Ready State: "${document.readyState}"
            `;
        }
        
        // Check status on page load
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(checkStatus, 1000);
        });
        
        // Check status every 2 seconds for debugging
        setInterval(checkStatus, 2000);
    </script>
</body>
</html>
